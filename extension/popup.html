<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legalish Extension</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <img src="icons/icon32.png" alt="Legalish" class="logo-icon">
        <span class="logo-text">Legalish</span>
      </div>
      <div class="status" id="status">
        <span class="status-dot"></span>
        <span class="status-text">Ready</span>
      </div>
    </div>

    <!-- Auth Section -->
    <div class="auth-section" id="authSection">
      <div class="auth-prompt">
        <h3>Sign in to analyze legal documents</h3>
        <p>Access your Pro features and analysis history</p>
        <button class="btn btn-primary" id="signInBtn">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
            <polyline points="10,17 15,12 10,7"/>
            <line x1="15" y1="12" x2="3" y2="12"/>
          </svg>
          Sign In
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent" style="display: none;">
      <!-- Input Methods -->
      <div class="input-section">
        <div class="input-tabs">
          <button class="tab-btn active" data-tab="selection">Selection</button>
          <button class="tab-btn" data-tab="paste">Paste</button>
          <button class="tab-btn" data-tab="page">Page</button>
        </div>

        <!-- Selection Tab -->
        <div class="tab-content active" id="selectionTab">
          <div class="selection-info">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"/>
              <path d="M21 12c.552 0 1-.448 1-1V5c0-.552-.448-1-1-1H3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h18z"/>
            </svg>
            <p>Select text on the page and click "Analyze Selection"</p>
          </div>
          <button class="btn btn-primary" id="analyzeSelectionBtn" disabled>
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
            </svg>
            Analyze Selection
          </button>
        </div>

        <!-- Paste Tab -->
        <div class="tab-content" id="pasteTab">
          <textarea 
            id="textInput" 
            placeholder="Paste legal text here (terms of service, contracts, etc.)"
            rows="4"
          ></textarea>
          <button class="btn btn-primary" id="analyzePasteBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
            </svg>
            Analyze Text
          </button>
        </div>

        <!-- Page Tab -->
        <div class="tab-content" id="pageTab">
          <div class="page-info">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <line x1="10" y1="9" x2="8" y2="9"/>
            </svg>
            <p>Analyze the entire page for legal terms</p>
            <span class="page-url" id="currentPageUrl">Loading...</span>
          </div>
          <button class="btn btn-primary" id="analyzePageBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
            </svg>
            Analyze Page
          </button>
        </div>
      </div>

      <!-- Tone Selection -->
      <div class="tone-section">
        <label for="toneSelect">Analysis Tone:</label>
        <select id="toneSelect">
          <option value="serious">üòê Serious</option>
          <option value="sarcastic">üòè Sarcastic</option>
          <option value="meme">ü§™ Meme</option>
          <option value="ominous">üòà Ominous</option>
          <option value="child" class="pro-option">üë∂ Child (Pro)</option>
          <option value="academic" class="pro-option">üéì Academic (Pro)</option>
          <option value="authoritative" class="pro-option">üëî Authoritative (Pro)</option>
          <option value="wizard" class="pro-option">üßô Wizard (Pro)</option>
        </select>
      </div>
    </div>

    <!-- Loading State -->
    <div class="loading-section" id="loadingSection" style="display: none;">
      <div class="loading-spinner"></div>
      <p>Analyzing legal terms...</p>
      <div class="loading-progress">
        <div class="progress-bar"></div>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection" style="display: none;">
      <div class="results-header">
        <h3>Analysis Complete</h3>
        <button class="btn btn-secondary btn-small" id="newAnalysisBtn">New Analysis</button>
      </div>
      
      <div class="results-tabs">
        <button class="tab-btn active" data-tab="summary">Summary</button>
        <button class="tab-btn" data-tab="redflags">Red Flags</button>
      </div>

      <div class="results-content">
        <div class="tab-content active" id="summaryResults">
          <div class="summary-text" id="summaryText"></div>
        </div>
        
        <div class="tab-content" id="redflagsResults">
          <div class="red-flags-list" id="redFlagsList"></div>
        </div>
      </div>

      <div class="results-actions">
        <button class="btn btn-outline" id="openFullBtn">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
            <polyline points="15,3 21,3 21,9"/>
            <line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
          Open in Legalish
        </button>
        <button class="btn btn-primary" id="playAudioBtn">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5,3 19,12 5,21"/>
          </svg>
          Play Audio
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="user-info" id="userInfo" style="display: none;">
        <span class="user-email" id="userEmail"></span>
        <span class="user-tier" id="userTier">Free</span>
      </div>
      <div class="footer-links">
        <a href="#" id="upgradeLink">Upgrade to Pro</a>
        <a href="#" id="dashboardLink">Dashboard</a>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>